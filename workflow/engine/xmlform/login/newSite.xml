<?xml version="1.0" encoding="UTF-8" ?>
<dynaForm name="new_workspace" version="1.0" basedir="" xmlform_type="NORMAL" width="400px" ajaxSubmit="true" in_progress="status_in_progress.args(9898)" callback="status_create">
<NEW_WORKSPACE type="title">
  <en>New Workspace</en>
</NEW_WORKSPACE>
<NW_TITLE type="text" size="30" maxlength="32" validate="AlphaNum">
  <en>Name</en>
</NW_TITLE>
<NW_SUB type="submit" oonclick="newSite(this.form);return false;">
  <en>Create</en>
</NW_SUB>
<JS type="JavaScript">
	<![CDATA[
	var status_in_progress=function(form)
	{
		var n = getField('NW_TITLE');
		var b = getField('NW_SUB');
		n.disabled=true;
		b.disabled=true;
	};
	var status_create=function(rpc)
	{
		try{var rp=rpc.xmlhttp.responseText.parseJSON();}catch(e){var rp={};}
		new leimnud.module.app.alert().make({
			label:rp.message,
			action:function()
			{
				if(!rp.created)
				{
					var n = getField('NW_TITLE');
					var b = getField('NW_SUB');
					n.disabled=false;
					b.disabled=false;
					n.focus();
				}
				else
				{
				window.location="/sys"+rp.name+"/en/green/login/login";
				}
			}
		});
	};
	]]>
</JS>
</dynaForm>
